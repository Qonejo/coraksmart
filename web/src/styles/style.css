/* Estilo base y fuente RPG */
body {
    background-color: #222;
    color: #fff;
    font-family: 'Press Start 2P', cursive;
    margin: 0;
    padding: 0;
    image-rendering: pixelated;
}

/* --- HEADER CORREGIDO Y UNIFICADO CON FLEXBOX --- */
header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 10px 20px;
    border-bottom: 4px solid #fff;
}
#logo { max-width: 300px; height: auto; }
.header-user-info {
    display: flex;
    flex-direction: column;
    align-items: flex-end;
    gap: 10px;
}
.perfil-link {
    display: flex;
    align-items: center;
    gap: 10px;
    color: #ffcc00;
    text-decoration: none;
    font-size: 0.8em;
}
.perfil-emoji-header {
    font-size: 2.4em; /* Avatar 3 veces más grande */
}
/* --- TÍTULOS DE SECCIÓN DE ANCHO COMPLETO (FIX) --- */
h2 {
    font-size: 1.2em;
    text-align: center;
    padding: 15px 20px;
    margin: 0;
    background-color: #444;
    border-top: 4px solid #888;
    border-bottom: 4px solid #888;
}

/* Contenedor principal */
.rpg-container {
    display: flex;
}

/* --- Panel de productos (izquierda) --- */
#productos-panel {
    flex: 3;
    min-width: 350px;
    border-right: 4px solid #fff;
}
.productos-grid {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(110px, 1fr));
    gap: 15px;
    padding: 15px;
}
.producto-item { background-color: #111; border: 2px solid #888; text-align: center; padding: 10px; transition: transform 0.2s, border-color 0.2s, box-shadow 0.2s; position: relative; display: flex; flex-direction: column; justify-content: space-between; }
.producto-item img { max-width: 120px; height: 120px; object-fit: contain; align-self: center; margin-bottom: 10px; cursor: pointer; }
.producto-nombre { font-size: 0.8em; margin-top: 10px; height: 40px; }
#promociones-panel .productos-grid { justify-content: center; }

/* --- LÓGICA DE PRECIOS Y PROMOCIONES --- */
.producto-precio { font-size: 0.9em; color: #33ff33; margin-top: 5px; }
.promo-item { border-color: #ffcc00; }
.promo-precio { animation: price-flash 2s infinite; }
@keyframes price-flash { 0%, 100% { color: #FFD700; } 33% { color: #FFFF00; } 66% { color: #FFFFFF; } }

/* --- PANEL DEL CARRITO CON FOOTER PEGAJOSO --- */
#carrito-panel {
    flex: 1;
    background-color: #333;
    display: flex;
    flex-direction: column;
    max-height: 90vh;
    border-left: 4px solid #fff;
}
.panel-header-actions { display: none; }
#carrito-contenido { flex-grow: 1; overflow-y: auto; padding: 15px; }
#carrito-lista { list-style: none; padding: 0; margin: 0; }
#carrito-lista li { display: flex; justify-content: space-between; align-items: center; padding: 8px 0; font-size: 0.8em; border-bottom: 1px dashed #666; }
.empty-cart-message { color: #888; text-align: center; padding: 20px; }
#carrito-resumen { padding: 15px; border-top: 4px solid #fff; background-color: #444; }
.total-line { display: flex; justify-content: space-between; font-size: 1.2em; margin-bottom: 15px; }
#carrito-total { color: #33ff33; }
.boton-comprar { display: block; width: 100%; padding: 15px 0; background-color: #ffcc00; color: #000; text-align: center; font-size: 1em; border: none; cursor: pointer; }
.boton-comprar.disabled { background-color: #666; color: #999; pointer-events: none; }

/* --- STOCK, DESCRIPCIÓN Y VARIACIONES --- */
.producto-stock { font-size: 0.7em; margin-top: 10px; color: #aaa; }
.producto-stock.stock-agotado { color: #ff4d4d; font-weight: bold; }
.producto-item.agotado { opacity: 0.6; filter: grayscale(80%); cursor: not-allowed; border-color: #555; }
.producto-descripcion { visibility: hidden; opacity: 0; width: 200px; background-color: #111; color: #fff; border-radius: 6px; padding: 10px; border: 2px solid #ffcc00; font-size: 0.7em; position: absolute; z-index: 10; bottom: 110%; left: 50%; margin-left: -100px; transition: opacity 0.3s; }
.producto-item:hover .producto-descripcion { visibility: visible; opacity: 1; }
.producto-descripcion::after { content: ""; position: absolute; top: 100%; left: 50%; margin-left: -5px; border-width: 5px; border-style: solid; border-color: #ffcc00 transparent transparent transparent; }
.variaciones-container { display: flex; flex-direction: column; gap: 5px; margin-top: 10px; }
.boton-variacion, .boton-agregar { font-size: 0.7em; padding: 8px; border: 1px solid #888; background: #333; color: #fff; cursor: pointer; width: 100%; text-align: center; }
.boton-variacion:hover, .boton-agregar:hover { background: #555; border-color: #ffcc00; }

/* --- EFECTOS VISUALES --- */
.producto-item:hover { transform: scale(1.05); }
.promo-item:hover { transform: scale(1.08) translateY(-5px); box-shadow: 0 0 15px #ffcc00; }

/* --- MODAL DE IMAGEN --- */
.modal-hidden { display: none !important; }
#image-modal { position: fixed; z-index: 1000; left: 0; top: 0; width: 100%; height: 100%; background-color: rgba(0, 0, 0, 0.85); display: flex; justify-content: center; align-items: center; }
.modal-content-image { max-width: 80%; max-height: 80%; }
#close-modal { position: absolute; top: 15px; right: 35px; color: #fff; font-size: 40px; font-weight: bold; cursor: pointer; }

/* --- SECCIONES DE PRODUCTOS Y AURA --- */
#seccion-promociones { background-color: #4a2d5e; border-bottom: 4px solid #fff; margin-bottom: 20px; }
.aura-display { display: flex; align-items: center; gap: 10px; border: 2px solid #888; padding: 5px 15px; background-color: #111; }
.aura-text { font-size: 1.2em; animation: aura-glow 2s infinite linear; }
.aura-points { font-size: 1.2em; color: #ffcc00; }
.aura-character { max-width: 96px; max-height: 96px; }

/* --- PROGRESO VISUAL --- */
.visual-progress-bar { position: relative; margin-top: 10px; width: 200px; height: 30px; }
.progress-bar-base { width: 100%; height: 100%; object-fit: contain; }
.exp-orbs-container { position: absolute; top: 5px; left: 0; width: 100%; height: 20px; }
.exp-orb { position: absolute; width: 10px; height: 10px; }

/* --- MODAL DE FELICITACIONES --- */
#level-up-modal { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0, 0, 0, 0.9); display: flex; justify-content: center; align-items: center; z-index: 10000; }
.level-up-content { background: #1a1a1a; border: 4px solid #ffcc00; border-radius: 20px; padding: 30px; text-align: center; }

/* --- RESPONSIVE --- */
@media (max-width: 768px) {
  .rpg-container { flex-direction: column; }
  #carrito-panel { position: fixed; bottom: 0; width: 100%; }
}

/* ============================================= */
/* === ESTILOS PARA LOGIN CON EMOJIS (NUEVO) === */
/* ============================================= */
.login-container {
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  background: rgba(0, 0, 0, 0.7);
  border: 2px solid #33ff33;
  border-radius: 8px;
  padding: 20px;
  text-align: center;
  z-index: 10;
  box-shadow: 0 0 15px rgba(0, 255, 0, 0.6);
  width: 90%;
  max-width: 400px;
}

.emoji-grid {
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(60px, 1fr));
  gap: 10px;
  margin: 15px 0;
}

.emoji-grid button {
  font-size: 2rem;
  background: rgba(30, 30, 30, 0.8);
  border: 2px solid #444;
  border-radius: 6px;
  cursor: pointer;
  transition: all 0.2s;
  padding: 10px;
  color: white;
}
.emoji-grid button:hover {
  border-color: #33ff33;
  background: rgba(50, 50, 50, 0.9);
  transform: scale(1.1);
}
.emoji-grid button.selected {
  border-color: #33ff33;
  background: rgba(0, 255, 0, 0.3);
  transform: scale(1.1);
  box-shadow: 0 0 10px rgba(0, 255, 0, 0.8);
}

.input-section { margin-top: 15px; }
